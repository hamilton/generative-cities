var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function a(e){return e()}function o(){return Object.create(null)}function c(e){e.forEach(a)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function f(e,t,n){e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(t,n))}function l(e,t,n){if(e){const a=s(e,t,n);return e[0](a)}}function s(e,t,a){return e[1]?n({},n(t.$$scope.ctx,e[1](a?a(t):{}))):t.$$scope.ctx}function d(e,t,a,o){return e[1]?n({},n(t.$$scope.changed||{},e[1](o?o(a):{}))):t.$$scope.changed||{}}const p="undefined"!=typeof window;let h=p?()=>window.performance.now():()=>Date.now(),g=p?e=>requestAnimationFrame(e):e;const u=new Set;let m,b=!1;function $(){u.forEach(e=>{e[0](h())||(u.delete(e),e[1]())}),(b=u.size>0)&&g($)}function y(e){let t;return b||(b=!0,g($)),{promise:new Promise(n=>{u.add(t=[e,n])}),abort(){u.delete(t)}}}function x(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode.removeChild(e)}function S(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function D(e){return document.createElement(e)}function v(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function z(e){return document.createTextNode(e)}function _(){return z(" ")}function X(){return z("")}function Y(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function A(e){return""===e?void 0:+e}function T(e,t){(null!=t||e.value)&&(e.value=t)}let j,E=0,k={};function O(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--E&&g(()=>{if(E)return;let e=m.cssRules.length;for(;e--;)m.deleteRule(e);k={}})}function H(e){j=e}function N(){if(!j)throw new Error("Function called outside component initialization");return j}function C(e,t){N().$$.context.set(e,t)}function P(e){return N().$$.context.get(e)}const B=[],G=[],I=[],R=[],q=Promise.resolve();let F,J=!1;function K(e){I.push(e)}function Q(){const e=new Set;do{for(;B.length;){const e=B.shift();H(e),U(e.$$)}for(;G.length;)G.pop()();for(let t=0;t<I.length;t+=1){const n=I[t];e.has(n)||(n(),e.add(n))}I.length=0}while(B.length);for(;R.length;)R.pop()();J=!1}function U(e){null!==e.fragment&&(e.update(e.dirty),c(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(K))}function V(e,t,n){e.dispatchEvent(function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(`${t?"intro":"outro"}${n}`))}const W=new Set;let Z;function ee(){Z={r:0,c:[],p:Z}}function te(){Z.r||c(Z.c),Z=Z.p}function ne(e,t){e&&e.i&&(W.delete(e),e.i(t))}function ae(e,t,n,a){if(e&&e.o){if(W.has(e))return;W.add(e),Z.c.push(()=>{W.delete(e),a&&(n&&e.d(1),a())}),e.o(t)}}const oe={duration:0};function ce(n,a,o){let c,r,f=a(n,o),l=!1,s=0;function d(){c&&O(n,c)}function p(){const{delay:a=0,duration:o=300,easing:i=t,tick:p=e,css:g}=f||oe;g&&(c=function(e,t,n,a,o,c,i,r=0){const f=16.666/a;let l="{\n";for(let e=0;e<=1;e+=f){const a=t+(n-t)*c(e);l+=100*e+`%{${i(a,1-a)}}\n`}const s=l+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(s)}_${r}`;if(!k[d]){if(!m){const e=D("style");document.head.appendChild(e),m=e.sheet}k[d]=!0,m.insertRule(`@keyframes ${d} ${s}`,m.cssRules.length)}const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${d} ${a}ms linear ${o}ms 1 both`,E+=1,d}(n,0,1,o,a,i,g,s++)),p(0,1);const u=h()+a,b=u+o;r&&r.abort(),l=!0,K(()=>V(n,!0,"start")),r=y(e=>{if(l){if(e>=b)return p(1,0),V(n,!0,"end"),d(),l=!1;if(e>=u){const t=i((e-u)/o);p(t,1-t)}}return l})}let g=!1;return{start(){g||(O(n),i(f)?(f=f(),(F||(F=Promise.resolve()).then(()=>{F=null}),F).then(p)):p())},invalidate(){g=!1},end(){l&&(d(),l=!1)}}}const ie="undefined"!=typeof window?window:global;function re(e){e&&e.c()}function fe(e,t,n){const{fragment:o,on_mount:r,on_destroy:f,after_update:l}=e.$$;o&&o.m(t,n),K(()=>{const t=r.map(a).filter(i);f?f.push(...t):c(t),e.$$.on_mount=[]}),l.forEach(K)}function le(e,t){const n=e.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}function se(e,t){e.$$.dirty||(B.push(e),J||(J=!0,q.then(Q)),e.$$.dirty=o()),e.$$.dirty[t]=!0}function de(t,n,a,i,r,f){const l=j;H(t);const s=n.props||{},d=t.$$={fragment:null,ctx:null,props:f,update:e,not_equal:r,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:o(),dirty:null};let p=!1;d.ctx=a?a(t,s,(e,n,a=n)=>(d.ctx&&r(d.ctx[e],d.ctx[e]=a)&&(d.bound[e]&&d.bound[e](a),p&&se(t,e)),n)):s,d.update(),p=!0,c(d.before_update),d.fragment=!!i&&i(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):d.fragment&&d.fragment.c(),n.intro&&ne(t.$$.fragment),fe(t,n.target,n.anchor),Q()),H(l)}class pe{$destroy(){le(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const he=[];function ge(t,n=e){let a;const o=[];function c(e){if(r(t,e)&&(t=e,a)){const e=!he.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),he.push(n,t)}if(e){for(let e=0;e<he.length;e+=2)he[e][0](he[e+1]);he.length=0}}}return{set:c,update:function(e){c(e(t))},subscribe:function(i,r=e){const f=[i,r];return o.push(f),1===o.length&&(a=n(c)||e),i(t),()=>{const e=o.indexOf(f);-1!==e&&o.splice(e,1),0===o.length&&(a(),a=null)}}}}function ue(e){const t=e-1;return t*t*t+1}function me(e){const t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}function be(e){return Math.sin(e*Math.PI/2)}function $e(e){return"[object Date]"===Object.prototype.toString.call(e)}function ye(e,t={}){const n=ge(e),{stiffness:a=.15,damping:o=.8,precision:c=.01}=t;let i,r,f,l=e,s=e,d=1,p=0,g=!1;function u(t,a={}){s=t;const o=f={};if(null==e||a.hard||m.stiffness>=1&&m.damping>=1)return g=!0,i=h(),l=t,n.set(e=s),Promise.resolve();if(a.soft){const e=!0===a.soft?.5:+a.soft;p=1/(60*e),d=0}return r||(i=h(),g=!1,r=y(t=>{if(g)return g=!1,r=null,!1;const a={inv_mass:d=Math.min(d+p,1),opts:m,settled:!0,dt:60*(t-i)/1e3},o=function e(t,n,a,o){if("number"==typeof a||$e(a)){const e=o-a,c=(a-n)/(t.dt||1/60),i=(c+(t.opts.stiffness*e-t.opts.damping*c)*t.inv_mass)*t.dt;return Math.abs(i)<t.opts.precision&&Math.abs(e)<t.opts.precision?o:(t.settled=!1,$e(a)?new Date(a.getTime()+i):a+i)}if(Array.isArray(a))return a.map((c,i)=>e(t,n[i],a[i],o[i]));if("object"==typeof a){const c={};for(const i in a)c[i]=e(t,n[i],a[i],o[i]);return c}throw new Error(`Cannot spring ${typeof a} values`)}(a,l,e,s);return i=t,l=e,n.set(e=o),a.settled&&(r=null),!a.settled})),new Promise(e=>{r.promise.then(()=>{o===f&&e()})})}const m={set:u,update:(t,n)=>u(t(s,e),n),subscribe:n.subscribe,stiffness:a,damping:o,precision:c};return m}function xe(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map((t,n)=>xe(e[n],t));return e=>n.map(t=>t(e))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if($e(e)&&$e(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),a={};return n.forEach(n=>{a[n]=xe(e[n],t[n])}),e=>{const t={};return n.forEach(n=>{t[n]=a[n](e)}),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function we(e,a={}){const o=ge(e);let c,i=e;function r(r,f){if(null==e)return o.set(e=r),Promise.resolve();i=r;let l=c,s=!1,{delay:d=0,duration:p=400,easing:g=t,interpolate:u=xe}=n(n({},a),f);const m=h()+d;let b;return(c=y(t=>{if(t<m)return!0;s||(b=u(e,r),"function"==typeof p&&(p=p(e,r)),s=!0),l&&(l.abort(),l=null);const n=t-m;return n>p?(o.set(e=r),!1):(o.set(e=b(g(n/p))),!0)})).promise}return{set:r,update:(t,n)=>r(t(i,e),n),subscribe:o.subscribe}}function Le(e){for(var t=e.length/6|0,n=new Array(t),a=0;a<t;)n[a]="#"+e.slice(6*a,6*++a);return n}function Se(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}Se(Le("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var De=Se(Le("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));Se(Le("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Se(Le("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ve(e,{delay:t=0,duration:n=400,easing:a=ue,x:o=0,y:c=0,opacity:i=0}){const r=getComputedStyle(e),f=+r.opacity,l="none"===r.transform?"":r.transform,s=f*(1-i);return{delay:t,duration:n,easing:a,css:(e,t)=>`\n\t\t\ttransform: ${l} translate(${(1-e)*o}px, ${(1-e)*c}px);\n\t\t\topacity: ${f-s*t}`}}const ze=({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o})=>({}),_e=({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o})=>({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o});function Xe(e,t,n){const a=Object.create(e);return a._=t[n],a.i=n,a}const Ye=({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o})=>({}),Me=({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o})=>({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o}),Ae=({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o})=>({}),Te=({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o})=>({mapX:e,mapY:t,mapToScene:n,placeX:a,placeY:o});function je(t){let n,a,o=Array.from({length:t.tileDimensions+1}).fill(null),c=[];for(let e=0;e<o.length;e+=1)c[e]=Ee(Xe(t,o,e));return{c(){n=v("g");for(let e=0;e<c.length;e+=1)c[e].c()},m(e,t){w(e,n,t);for(let e=0;e<c.length;e+=1)c[e].m(n,null)},p(e,t){if(e.coords||e.tileDimensions||e.Array){let a;for(o=Array.from({length:t.tileDimensions+1}).fill(null),a=0;a<o.length;a+=1){const i=Xe(t,o,a);c[a]?c[a].p(e,i):(c[a]=Ee(i),c[a].c(),c[a].m(n,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=o.length}},i(e){a||K(()=>{(a=ce(n,ve,{duration:200,y:-2,easing:ue})).start()})},o:e,d(e){e&&L(n),S(c,e)}}}function Ee(t){let n,a,o,c,i,r,f,l,s,d;return{c(){n=v("line"),r=v("line"),M(n,"x1",a=t.coords(t.i,0).lx),M(n,"x2",o=t.coords(t.i,t.tileDimensions).lx),M(n,"y1",c=t.coords(t.i,0).ly),M(n,"y2",i=t.coords(t.i,t.tileDimensions).ry),M(n,"stroke","gray"),M(r,"x1",f=t.coords(0,t.i).lx),M(r,"x2",l=t.coords(t.tileDimensions,t.i).lx),M(r,"y1",s=t.coords(0,t.i).ly),M(r,"y2",d=t.coords(t.tileDimensions,t.i).ry),M(r,"stroke","gray")},m(e,t){w(e,n,t),w(e,r,t)},p:e,d(e){e&&L(n),e&&L(r)}}}function ke(e){let t,n,a,o,c,i,r,f,p,h,g,u,m,b;const $=e.$$slots.defs,y=l($,e,Te),S=e.$$slots.earth,z=l(S,e,Me);let _=e.grid&&je(e);const Y=e.$$slots.default,A=l(Y,e,_e);return{c(){t=D("div"),n=v("svg"),a=v("defs"),o=v("clipPath"),c=v("polygon"),y||(r=v("defs"),f=v("radialGradient"),p=v("stop"),h=v("stop")),y&&y.c(),z&&z.c(),_&&_.c(),g=X(),A&&A.c(),M(c,"points",i=[e.left,e.bottom,e.right,e.top].map(Oe).join(" ")),M(o,"id","shadow-clip"),y||(M(p,"offset","10%"),M(p,"stop-color","#3a1e48"),M(h,"offset","95%"),M(h,"stop-color","#2e183a"),M(f,"id","treetop"),M(f,"cx","20%"),M(f,"cy","20%"),M(f,"r","50%"),M(f,"fx","20%"),M(f,"fy","20%")),M(n,"width",e.width),M(n,"height",u=e.width/2+2*e.margin),M(n,"class","svelte-tc0c9o"),M(t,"class","svelte-tc0c9o")},m(e,i){w(e,t,i),x(t,n),x(n,a),x(a,o),x(o,c),y||(x(n,r),x(r,f),x(f,p),x(f,h)),y&&y.m(n,null),z&&z.m(n,null),_&&_.m(n,null),x(n,g),A&&A.m(n,null),b=!0},p(e,t){y&&y.p&&e.$$scope&&y.p(d($,t,e,Ae),s($,t,Te)),z&&z.p&&e.$$scope&&z.p(d(S,t,e,Ye),s(S,t,Me)),t.grid?_?(_.p(e,t),ne(_,1)):((_=je(t)).c(),ne(_,1),_.m(n,g)):_&&(_.d(1),_=null),A&&A.p&&e.$$scope&&A.p(d(Y,t,e,ze),s(Y,t,_e)),b&&!e.width||M(n,"width",t.width),(!b||(e.width||e.margin)&&u!==(u=t.width/2+2*t.margin))&&M(n,"height",u)},i(e){b||(ne(y,e),ne(z,e),ne(_),ne(A,e),m||K(()=>{(m=ce(n,ve,{duration:200,y:10})).start()}),b=!0)},o(e){ae(y,e),ae(z,e),ae(A,e),b=!1},d(e){e&&L(t),y&&y.d(e),z&&z.d(e),_&&_.d(),A&&A.d(e)}}}const Oe=e=>e.join(",");function He(e,t,n){let{width:a=500}=t,{tileSize:o=25}=t,{margin:c=100}=t,{grid:i=!0}=t;const r=a/o/2,f=a/4/r,l=a/2/r,s=(e,t,n=0)=>({lx:e*l+t*l,ly:c+a/4+e*f-t*f-n,tx:e*l+t*l+l,ty:c+a/4+e*f-t*f-f-n,rx:e*l+t*l+2*l,ry:c+a/4+e*f-t*f-n,bx:e*l+t*l+l,by:c+a/4+e*f-t*f-f+2*f-n}),d=(e,t,n=0)=>(e+t)*l,p=(e,t,n=0)=>(e-t-2*n)*f,h=(e,t,n=0)=>d(e,t,n),g=(e,t,n=0)=>c+a/4+p(e,t,n),u=(e,t,n=0)=>[h(e,t,n),g(e,t,n)],m=(e,t,n,a=[0,0])=>{const o=(e-a[0])*Math.cos(n)-(t-a[1])*Math.sin(n)*2,c=(e-a[0])/2*Math.sin(n)+(t-a[1])*Math.cos(n);return[o+a[0],c+a[1]]},b=(e,t,n=0,a=0,o=[.5,.5])=>{const c=d(e,t),i=p(e,t),r=((e,t,n=0)=>[d(e,t,n),p(e,t,n)])(...o),[l,s]=m(c,i,a,r);return[l,s-2*n*f]};C("tileSize",o),C("width",a),C("height",a/2),C("tileDimensions",r),C("coords",s),C("scale",(e,t,n=0)=>{const a=s(e,t,n);return[a.lx,a.ly]}),C("margin",c),C("rotate",m),C("mapToScene",b),C("mapX",d),C("mapY",p),C("placeX",h),C("placeY",g),C("placeXY",u);const $=u(0,0),y=u(0,r),x=u(r,r),w=u(r,0);let{$$slots:L={},$$scope:S}=t;return e.$set=e=>{"width"in e&&n("width",a=e.width),"tileSize"in e&&n("tileSize",o=e.tileSize),"margin"in e&&n("margin",c=e.margin),"grid"in e&&n("grid",i=e.grid),"$$scope"in e&&n("$$scope",S=e.$$scope)},{width:a,tileSize:o,margin:c,grid:i,tileDimensions:r,coords:s,mapX:d,mapY:p,placeX:h,placeY:g,mapToScene:b,left:$,top:y,right:x,bottom:w,$$slots:L,$$scope:S}}class Ne extends pe{constructor(e){super(),de(this,e,He,ke,r,{width:0,tileSize:0,margin:0,grid:0})}}function Ce(t){let n,a;return{c(){M(n=v("ellipse"),"cx",t.px),M(n,"cy",t.py),M(n,"rx",t.pr),M(n,"ry",a=t.pr/2),M(n,"fill",t.fill),M(n,"opacity",t.opacity)},m(e,t){w(e,n,t)},p(e,t){e.px&&M(n,"cx",t.px),e.py&&M(n,"cy",t.py),e.pr&&M(n,"rx",t.pr),e.pr&&a!==(a=t.pr/2)&&M(n,"ry",a),e.fill&&M(n,"fill",t.fill),e.opacity&&M(n,"opacity",t.opacity)},i:e,o:e,d(e){e&&L(n)}}}function Pe(e,t,n){let{x:a}=t,{y:o}=t,{z:c=0}=t,{r:i=1}=t,{fill:r="black"}=t,{opacity:f=1}=t;const l=P("placeXY"),s=P("tileSize");let d,p,h;return e.$set=e=>{"x"in e&&n("x",a=e.x),"y"in e&&n("y",o=e.y),"z"in e&&n("z",c=e.z),"r"in e&&n("r",i=e.r),"fill"in e&&n("fill",r=e.fill),"opacity"in e&&n("opacity",f=e.opacity)},e.$$.update=(e={x:1,y:1,z:1,r:1})=>{(e.x||e.y||e.z)&&n("px",[d,p]=l(a,o,c),d,(n("py",p),n("x",a),n("y",o),n("z",c))),e.r&&n("pr",h=i*s*(Math.PI/5))},{x:a,y:o,z:c,r:i,fill:r,opacity:f,px:d,py:p,pr:h}}class Be extends pe{constructor(e){super(),de(this,e,Pe,Ce,r,{x:0,y:0,z:0,r:0,fill:0,opacity:0})}}function Ge(t){let n,a;return{c(){M(n=v("polygon"),"points",a="\n        "+t.points.map(t.func).join(" ")+"\n    "),M(n,"fill",t.fill),M(n,"opacity",t.opacity)},m(e,t){w(e,n,t)},p(e,t){(e.points||e.map||e.angle||e.centroid)&&a!==(a="\n        "+t.points.map(t.func).join(" ")+"\n    ")&&M(n,"points",a),e.fill&&M(n,"fill",t.fill),e.opacity&&M(n,"opacity",t.opacity)},i:e,o:e,d(e){e&&L(n)}}}function Ie(e,t,n){let{map:a=P("mapToScene")}=t,{angle:o=0}=t,{centroid:c=[.5,.5]}=t,{opacity:i=1}=t,{points:r}=t,{fill:f="gray"}=t;const l=e=>e.join(",");return e.$set=e=>{"map"in e&&n("map",a=e.map),"angle"in e&&n("angle",o=e.angle),"centroid"in e&&n("centroid",c=e.centroid),"opacity"in e&&n("opacity",i=e.opacity),"points"in e&&n("points",r=e.points),"fill"in e&&n("fill",f=e.fill)},{map:a,angle:o,centroid:c,opacity:i,points:r,fill:f,m:l,func:e=>l(a(...e,o,c))}}class Re extends pe{constructor(e){super(),de(this,e,Ie,Ge,r,{map:0,angle:0,centroid:0,opacity:0,points:0,fill:0})}}function qe(t){let n,a,o,c,i,r,f,l,s,d,p,h,g,u,m,b,$,y,S,D,z,X,Y,A,T;return{c(){n=v("linearGradient"),a=v("stop"),o=v("stop"),c=_(),i=v("linearGradient"),r=v("stop"),f=v("stop"),l=_(),s=v("linearGradient"),d=v("stop"),p=v("stop"),h=_(),g=v("linearGradient"),u=v("stop"),m=v("stop"),b=v("stop"),$=_(),y=v("linearGradient"),S=v("stop"),D=v("stop"),z=v("stop"),X=_(),Y=v("linearGradient"),A=v("stop"),T=v("stop"),M(a,"offset","0%"),M(a,"stop-color","#c25e5e"),M(o,"offset","100%"),M(o,"stop-color","#60547d"),M(n,"id","top"),M(n,"x1","0"),M(n,"x2","1"),M(n,"y1","0"),M(n,"y2","1"),M(r,"offset","0%"),M(r,"stop-color","#875580"),M(f,"offset","100%"),M(f,"stop-color","#2f4858"),M(i,"id","right-front"),M(i,"x1","0"),M(i,"x2","1"),M(i,"y1","0"),M(i,"y2","1"),M(d,"offset","0%"),M(d,"stop-color","#7e4f77"),M(p,"offset","100%"),M(p,"stop-color","#2f4858"),M(s,"id","right-back"),M(s,"x1","1"),M(s,"x2","1"),M(s,"y1","0"),M(s,"y2","1"),M(u,"offset","0%"),M(u,"stop-color","#d65db1"),M(m,"offset","30%"),M(m,"stop-color","#d65db1"),M(b,"offset","100%"),M(b,"stop-color","#60547d"),M(g,"id","left-front"),M(g,"x1","0"),M(g,"x2","0"),M(g,"y1","0"),M(g,"y2","1"),M(S,"offset","0%"),M(S,"stop-color","#d65db1"),M(D,"offset","30%"),M(D,"stop-color","#d65db1"),M(z,"offset","100%"),M(z,"stop-color","#60547d"),M(y,"id","left-back"),M(y,"x1","0"),M(y,"x2","0"),M(y,"y1","0"),M(y,"y2","1"),M(A,"offset","0%"),M(A,"stop-color","rgba(0,0,0,.095)"),M(T,"offset","100%"),M(T,"stop-color","rgba(0,0,0,.07)"),M(Y,"id","shadow"),M(Y,"x1","0"),M(Y,"x2","1"),M(Y,"y1","0"),M(Y,"y2","1")},m(e,t){w(e,n,t),x(n,a),x(n,o),w(e,c,t),w(e,i,t),x(i,r),x(i,f),w(e,l,t),w(e,s,t),x(s,d),x(s,p),w(e,h,t),w(e,g,t),x(g,u),x(g,m),x(g,b),w(e,$,t),w(e,y,t),x(y,S),x(y,D),x(y,z),w(e,X,t),w(e,Y,t),x(Y,A),x(Y,T)},p:e,i:e,o:e,d(e){e&&L(n),e&&L(c),e&&L(i),e&&L(l),e&&L(s),e&&L(h),e&&L(g),e&&L($),e&&L(y),e&&L(X),e&&L(Y)}}}class Fe extends pe{constructor(e){super(),de(this,e,null,qe,r,{})}}function Je(e){let t,n,a,o,c,i,r,f,l,s,d,p,h,g;const u=new Fe({}),m=new Re({props:{points:[[e.tileDimensions,0,-1],[e.tileDimensions,0,0],[e.tileDimensions,e.tileDimensions,0],[e.tileDimensions,e.tileDimensions,-1]],centroid:[e.tileDimensions/2,e.tileDimensions/2],angle:e.horizontalAngle,fill:"url(#left-front)",opacity:.1}}),b=new Re({props:{points:[[0,0,-1],[e.tileDimensions,0,-1],[e.tileDimensions,0,0],[0,0,0]],centroid:[e.tileDimensions/2,e.tileDimensions/2],angle:e.horizontalAngle,fill:"url(#left-front)",opacity:.3}}),$=new Re({props:{points:[[0,0,0],[0,e.tileDimensions,0],[e.tileDimensions,e.tileDimensions,0],[e.tileDimensions,0,0]],angle:e.horizontalAngle,centroid:[e.tileDimensions/2,e.tileDimensions/2],fill:"url(#earth)",opacity:".4"}});return{c(){t=v("g"),n=v("defs"),re(u.$$.fragment),a=v("linearGradient"),o=v("stop"),c=v("stop"),i=v("stop"),r=v("stop"),f=v("g"),re(m.$$.fragment),s=v("g"),re(b.$$.fragment),p=v("g"),re($.$$.fragment),M(o,"class","stop1"),M(o,"offset","0%"),M(o,"stop-color","#705f7e"),M(c,"class","stop3"),M(c,"offset","20%"),M(c,"stop-color","#5a5e84"),M(i,"class","stop1"),M(i,"offset","40%"),M(i,"stop-color","#705f7e"),M(r,"class","stop3"),M(r,"offset","60%"),M(r,"stop-color","#5a5e84"),M(a,"id","earth"),M(a,"x1","0"),M(a,"x2","1"),M(a,"y1","0"),M(a,"y2","1"),M(f,"transform",l="translate(0 "+(e.margin+e.width/4)+")"),M(s,"transform",d="translate(0 "+(e.margin+e.width/4)+")"),M(p,"transform",h="translate(0 "+(e.margin+e.width/4)+")")},m(e,l){w(e,t,l),x(t,n),fe(u,n,null),x(n,a),x(a,o),x(a,c),x(a,i),x(a,r),x(t,f),fe(m,f,null),x(t,s),fe(b,s,null),x(t,p),fe($,p,null),g=!0},p(e,t){const n={};e.tileDimensions&&(n.points=[[t.tileDimensions,0,-1],[t.tileDimensions,0,0],[t.tileDimensions,t.tileDimensions,0],[t.tileDimensions,t.tileDimensions,-1]]),e.tileDimensions&&(n.centroid=[t.tileDimensions/2,t.tileDimensions/2]),e.horizontalAngle&&(n.angle=t.horizontalAngle),m.$set(n),(!g||(e.margin||e.width)&&l!==(l="translate(0 "+(t.margin+t.width/4)+")"))&&M(f,"transform",l);const a={};e.tileDimensions&&(a.points=[[0,0,-1],[t.tileDimensions,0,-1],[t.tileDimensions,0,0],[0,0,0]]),e.tileDimensions&&(a.centroid=[t.tileDimensions/2,t.tileDimensions/2]),e.horizontalAngle&&(a.angle=t.horizontalAngle),b.$set(a),(!g||(e.margin||e.width)&&d!==(d="translate(0 "+(t.margin+t.width/4)+")"))&&M(s,"transform",d);const o={};e.tileDimensions&&(o.points=[[0,0,0],[0,t.tileDimensions,0],[t.tileDimensions,t.tileDimensions,0],[t.tileDimensions,0,0]]),e.horizontalAngle&&(o.angle=t.horizontalAngle),e.tileDimensions&&(o.centroid=[t.tileDimensions/2,t.tileDimensions/2]),$.$set(o),(!g||(e.margin||e.width)&&h!==(h="translate(0 "+(t.margin+t.width/4)+")"))&&M(p,"transform",h)},i(e){g||(ne(u.$$.fragment,e),ne(m.$$.fragment,e),ne(b.$$.fragment,e),ne($.$$.fragment,e),g=!0)},o(e){ae(u.$$.fragment,e),ae(m.$$.fragment,e),ae(b.$$.fragment,e),ae($.$$.fragment,e),g=!1},d(e){e&&L(t),le(u),le(m),le(b),le($)}}}function Ke(e,t,n){let{tileDimensions:a=P("tileDimensions")}=t,{margin:o=P("margin")}=t,{width:c=P("width")}=t,{horizontalAngle:i=0}=t;return e.$set=e=>{"tileDimensions"in e&&n("tileDimensions",a=e.tileDimensions),"margin"in e&&n("margin",o=e.margin),"width"in e&&n("width",c=e.width),"horizontalAngle"in e&&n("horizontalAngle",i=e.horizontalAngle)},{tileDimensions:a,margin:o,width:c,horizontalAngle:i}}class Qe extends pe{constructor(e){super(),de(this,e,Ke,Je,r,{tileDimensions:0,margin:0,width:0,horizontalAngle:0})}}function Ue(e,t,n){const a=Object.create(e);return a.x=t[n][0],a.y=t[n][1],a.z=t[n][2],a.r=t[n][3],a.c=t[n][4],a}function Ve(e,t,n){const a=Object.create(e);return a.row=t[n],a}function We(e){let t,n;const a=new Qe({});return{c(){t=v("g"),re(a.$$.fragment),M(t,"slot","earth")},m(e,o){w(e,t,o),fe(a,t,null),n=!0},i(e){n||(ne(a.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),n=!1},d(e){e&&L(t),le(a)}}}function Ze(e){let t,n;const a=new Be({props:{x:e.x+.5,y:e.y+.5,z:0,r:e.r,fill:"black",opacity:".2"}}),o=new Be({props:{x:e.x+.5,y:e.y+.5,z:e.z,r:e.r,fill:De(e.c)}});return{c(){re(a.$$.fragment),t=_(),re(o.$$.fragment)},m(e,c){fe(a,e,c),w(e,t,c),fe(o,e,c),n=!0},p(e,t){const n={};e.$circles&&(n.x=t.x+.5),e.$circles&&(n.y=t.y+.5),e.$circles&&(n.r=t.r),a.$set(n);const c={};e.$circles&&(c.x=t.x+.5),e.$circles&&(c.y=t.y+.5),e.$circles&&(c.z=t.z),e.$circles&&(c.r=t.r),e.$circles&&(c.fill=De(t.c)),o.$set(c)},i(e){n||(ne(a.$$.fragment,e),ne(o.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),ae(o.$$.fragment,e),n=!1},d(e){le(a,e),e&&L(t),le(o,e)}}}function et(e){let t,n,a=e.row,o=[];for(let t=0;t<a.length;t+=1)o[t]=Ze(Ue(e,a,t));const c=e=>ae(o[e],1,1,()=>{o[e]=null});return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=X()},m(e,a){for(let t=0;t<o.length;t+=1)o[t].m(e,a);w(e,t,a),n=!0},p(e,n){if(e.$circles||e.interpolateMagma){let i;for(a=n.row,i=0;i<a.length;i+=1){const c=Ue(n,a,i);o[i]?(o[i].p(e,c),ne(o[i],1)):(o[i]=Ze(c),o[i].c(),ne(o[i],1),o[i].m(t.parentNode,t))}for(ee(),i=a.length;i<o.length;i+=1)c(i);te()}},i(e){if(!n){for(let e=0;e<a.length;e+=1)ne(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ae(o[e]);n=!1},d(e){S(o,e),e&&L(t)}}}function tt(e){let t,n,a,o=e.$circles,c=[];for(let t=0;t<o.length;t+=1)c[t]=et(Ve(e,o,t));const i=e=>ae(c[e],1,1,()=>{c[e]=null});return{c(){t=_();for(let e=0;e<c.length;e+=1)c[e].c();n=X()},m(e,o){w(e,t,o);for(let t=0;t<c.length;t+=1)c[t].m(e,o);w(e,n,o),a=!0},p(e,t){if(e.$circles||e.interpolateMagma){let a;for(o=t.$circles,a=0;a<o.length;a+=1){const i=Ve(t,o,a);c[a]?(c[a].p(e,i),ne(c[a],1)):(c[a]=et(i),c[a].c(),ne(c[a],1),c[a].m(n.parentNode,n))}for(ee(),a=o.length;a<c.length;a+=1)i(a);te()}},i(e){if(!a){for(let e=0;e<o.length;e+=1)ne(c[e]);a=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)ae(c[e]);a=!1},d(e){e&&L(t),S(c,e),e&&L(n)}}}function nt(e){let t;const n=new Ne({props:{width:at,tileSize:e.tileSize,grid:!1,$$slots:{default:[tt],earth:[We]},$$scope:{ctx:e}}});return{c(){re(n.$$.fragment)},m(e,a){fe(n,e,a),t=!0},p(e,t){const a={};(e.$$scope||e.$circles)&&(a.$$scope={changed:e,ctx:t}),n.$set(a)},i(e){t||(ne(n.$$.fragment,e),t=!0)},o(e){ae(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}const at=1400,ot=15,ct=400;function it(e,t,n){let a;const o=at/ot/2,c=ct,i=ct,r=(e,t=!1)=>Array.from({length:ot}).map((n,a)=>((e,t,n)=>[Math.max(0,Math.min(ot-.5,e+Math.random()-.5)),Math.max(0,Math.min(ot-.5,t+Math.random()-.5)),n?0:2*Math.random(),...Array.from({length:2}).fill(.3+.7*Math.random()*((ot-e)/ot)).flatMap(e=>[n?.05:e,1-(.05+.6*e)])])(a,e,t)),l=we(Array.from({length:ot}).map((e,t)=>r(ot-t-1,!0)),{duration:ct,down:me});f(e,l,e=>n("$circles",a=e));const s=we(0,{duration:800,up:be});let d=!1;return setInterval(()=>{s.set(d?0:1),l.set(Array.from({length:ot}).map((e,t)=>r(ot-t-1,!d)),{duration:d?i:c,easing:d?be:me}),d=!d},ct),s.set(1),{tileSize:o,circles:l,$circles:a}}class rt extends pe{constructor(e){super(),de(this,e,it,nt,r,{})}}var ft=function e(t){function n(e,n){return e=+e,n=+n,function(){for(var a=-1,o=0;++a<e;)o+=t()<n;return o}}return n.source=e,n}(Math.random);function lt(e){let t,n,a,o,c;return{c(){t=v("g"),n=v("g"),M(a=v("polygon"),"points",o=e.shadow.map(pt).join(" ")),M(a,"fill","url(#shadow)"),M(n,"transform",c="translate("+e.placeX(e.x,e.y)+" "+e.placeY(e.x,e.y)+")"),M(t,"clip-path","url(#shadow-clip)")},m(e,o){w(e,t,o),x(t,n),x(n,a)},p(e,t){e.shadow&&o!==(o=t.shadow.map(pt).join(" "))&&M(a,"points",o),(e.placeX||e.x||e.y||e.placeY)&&c!==(c="translate("+t.placeX(t.x,t.y)+" "+t.placeY(t.x,t.y)+")")&&M(n,"transform",c)},d(e){e&&L(t)}}}function st(e){let t,n,a;const o=new Re({props:{points:[[0,0,0],[e.xLength,0,0],[e.xLength,e.yLength,0],[0,e.yLength,0]],centroid:e.centroid,fill:"url(#shadow)",angle:e.angle}});return{c(){t=v("g"),re(o.$$.fragment),M(t,"transform",n="translate("+e.placeX(e.x,e.y)+" "+e.placeY(e.x,e.y)+")")},m(e,n){w(e,t,n),fe(o,t,null),a=!0},p(e,c){const i={};(e.xLength||e.yLength)&&(i.points=[[0,0,0],[c.xLength,0,0],[c.xLength,c.yLength,0],[0,c.yLength,0]]),e.centroid&&(i.centroid=c.centroid),e.angle&&(i.angle=c.angle),o.$set(i),(!a||(e.placeX||e.x||e.y||e.placeY)&&n!==(n="translate("+c.placeX(c.x,c.y)+" "+c.placeY(c.x,c.y)+")"))&&M(t,"transform",n)},i(e){a||(ne(o.$$.fragment,e),a=!0)},o(e){ae(o.$$.fragment,e),a=!1},d(e){e&&L(t),le(o)}}}function dt(e){let t,n,a,o,c,i=e.castingShadow&&lt(e),r=e.downwardShadow&&st(e);const f=new Re({props:{points:[[e.xLength,e.yLength,0],[e.xLength,e.yLength,e.height],[0,e.yLength,e.height],[0,e.yLength,0]],centroid:e.centroid,angle:e.angle,fill:"url(#right-back)"}}),l=new Re({props:{points:[[0,0,0],[0,0,e.height],[e.xLength,0,e.height],[e.xLength,0,0]],centroid:e.centroid,angle:e.angle,fill:"url(#left-front)"}}),s=new Re({props:{points:[[e.xLength,0,0],[e.xLength,0,e.height],[e.xLength,e.yLength,e.height],[e.xLength,e.yLength,0]],centroid:e.centroid,fill:"url(#right-front)",angle:e.angle}}),d=new Re({props:{points:[[0,0,e.height],[e.xLength,0,e.height],[e.xLength,e.yLength,e.height],[0,e.yLength,e.height]],centroid:e.centroid,fill:"url(#top)",angle:e.angle}});return{c(){i&&i.c(),t=_(),r&&r.c(),n=_(),a=v("g"),re(f.$$.fragment),re(l.$$.fragment),re(s.$$.fragment),re(d.$$.fragment),M(a,"transform",o="translate("+e.placeX(e.x,e.y,e.z)+" "+e.placeY(e.x,e.y,e.z)+")"),M(a,"opacity",e.opacity)},m(e,o){i&&i.m(e,o),w(e,t,o),r&&r.m(e,o),w(e,n,o),w(e,a,o),fe(f,a,null),fe(l,a,null),fe(s,a,null),fe(d,a,null),c=!0},p(e,p){p.castingShadow?i?i.p(e,p):((i=lt(p)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),p.downwardShadow?r?(r.p(e,p),ne(r,1)):((r=st(p)).c(),ne(r,1),r.m(n.parentNode,n)):r&&(ee(),ae(r,1,1,()=>{r=null}),te());const h={};(e.xLength||e.yLength||e.height)&&(h.points=[[p.xLength,p.yLength,0],[p.xLength,p.yLength,p.height],[0,p.yLength,p.height],[0,p.yLength,0]]),e.centroid&&(h.centroid=p.centroid),e.angle&&(h.angle=p.angle),f.$set(h);const g={};(e.height||e.xLength)&&(g.points=[[0,0,0],[0,0,p.height],[p.xLength,0,p.height],[p.xLength,0,0]]),e.centroid&&(g.centroid=p.centroid),e.angle&&(g.angle=p.angle),l.$set(g);const u={};(e.xLength||e.height||e.yLength)&&(u.points=[[p.xLength,0,0],[p.xLength,0,p.height],[p.xLength,p.yLength,p.height],[p.xLength,p.yLength,0]]),e.centroid&&(u.centroid=p.centroid),e.angle&&(u.angle=p.angle),s.$set(u);const m={};(e.height||e.xLength||e.yLength)&&(m.points=[[0,0,p.height],[p.xLength,0,p.height],[p.xLength,p.yLength,p.height],[0,p.yLength,p.height]]),e.centroid&&(m.centroid=p.centroid),e.angle&&(m.angle=p.angle),d.$set(m),(!c||(e.placeX||e.x||e.y||e.z||e.placeY)&&o!==(o="translate("+p.placeX(p.x,p.y,p.z)+" "+p.placeY(p.x,p.y,p.z)+")"))&&M(a,"transform",o),c&&!e.opacity||M(a,"opacity",p.opacity)},i(e){c||(ne(r),ne(f.$$.fragment,e),ne(l.$$.fragment,e),ne(s.$$.fragment,e),ne(d.$$.fragment,e),c=!0)},o(e){ae(r),ae(f.$$.fragment,e),ae(l.$$.fragment,e),ae(s.$$.fragment,e),ae(d.$$.fragment,e),c=!1},d(e){i&&i.d(e),e&&L(t),r&&r.d(e),e&&L(n),e&&L(a),le(f),le(l),le(s),le(d)}}}const pt=e=>e.join(",");function ht(e,t,n){let a,o,c,i,r,f,l,s,d,{placeX:p=P("placeX")}=t,{placeY:h=P("placeY")}=t,{placeXY:g=P("placeXY")}=t,{mapToScene:u=P("mapToScene")}=t,{tileDimensions:m=P("tileDimensions")}=t,{downwardShadow:b=!1}=t,{castingShadow:$=!0}=t,{x:y=0}=t,{y:x=0}=t,{z:w=0}=t,{height:L=1}=t,{xLength:S=1}=t,{yLength:D=1}=t,{angle:v=0}=t,{opacity:z=1}=t,_=[],X=[];return e.$set=e=>{"placeX"in e&&n("placeX",p=e.placeX),"placeY"in e&&n("placeY",h=e.placeY),"placeXY"in e&&n("placeXY",g=e.placeXY),"mapToScene"in e&&n("mapToScene",u=e.mapToScene),"tileDimensions"in e&&n("tileDimensions",m=e.tileDimensions),"downwardShadow"in e&&n("downwardShadow",b=e.downwardShadow),"castingShadow"in e&&n("castingShadow",$=e.castingShadow),"x"in e&&n("x",y=e.x),"y"in e&&n("y",x=e.y),"z"in e&&n("z",w=e.z),"height"in e&&n("height",L=e.height),"xLength"in e&&n("xLength",S=e.xLength),"yLength"in e&&n("yLength",D=e.yLength),"angle"in e&&n("angle",v=e.angle),"opacity"in e&&n("opacity",z=e.opacity)},e.$$.update=(e={xLength:1,yLength:1,mapToScene:1,angle:1,centroid:1,placeXY:1,x:1,y:1,height:1,tileDimensions:1,bx:1,by:1,H:1,rx:1,ry:1,tx:1,ty:1})=>{(e.xLength||e.yLength)&&n("centroid",_=[S/2,D/2]),(e.mapToScene||e.xLength||e.yLength||e.angle||e.centroid)&&n("rx",[a,o]=u(S,D,0,v,_),a,(n("ry",o),n("mapToScene",u),n("xLength",S),n("yLength",D),n("angle",v),n("centroid",_))),(e.mapToScene||e.xLength||e.angle||e.centroid)&&n("bx",[r,f]=u(S,0,0,v,_),r,(n("by",f),n("mapToScene",u),n("xLength",S),n("angle",v),n("centroid",_),n("yLength",D))),(e.mapToScene||e.yLength||e.angle||e.centroid)&&n("tx",[c,i]=u(0,D,0,v,_),c,(n("ty",i),n("mapToScene",u),n("yLength",D),n("angle",v),n("centroid",_),n("xLength",S))),(e.placeXY||e.x||e.y)&&([s,d]=g(y,x)),(e.height||e.tileDimensions)&&n("H",l=L*m),(e.bx||e.by||e.H||e.rx||e.ry||e.tx||e.ty)&&n("shadow",X=[[r,f],[r+l,f+l/2],[a+l,o+l/2],[a,o],[a+l,o+l/2],[c+l,i+l/2],[c,i]])},{placeX:p,placeY:h,placeXY:g,mapToScene:u,tileDimensions:m,downwardShadow:b,castingShadow:$,x:y,y:x,z:w,height:L,xLength:S,yLength:D,angle:v,opacity:z,centroid:_,shadow:X}}class gt extends pe{constructor(e){super(),de(this,e,ht,dt,r,{placeX:0,placeY:0,placeXY:0,mapToScene:0,tileDimensions:0,downwardShadow:0,castingShadow:0,x:0,y:0,z:0,height:0,xLength:0,yLength:0,angle:0,opacity:0})}}const{Object:ut}=ie;function mt(e,t,n){const a=ut.create(e);return a.x=t[n][0],a.v=t[n][1],a.j=n,a}function bt(e,t,n){const a=ut.create(e);return a.row=t[n].row,a.arr=t[n].values,a.i=n,a}function $t(e){let t,n;const a=new Fe({});return{c(){t=v("defs"),re(a.$$.fragment),M(t,"slot","defs")},m(e,o){w(e,t,o),fe(a,t,null),n=!0},i(e){n||(ne(a.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),n=!1},d(e){e&&L(t),le(a)}}}function yt(e){let t,n;const a=new Qe({});return{c(){t=v("g"),re(a.$$.fragment),M(t,"slot","earth")},m(e,o){w(e,t,o),fe(a,t,null),n=!0},i(e){n||(ne(a.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),n=!1},d(e){e&&L(t),le(a)}}}function xt(t){let n;const a=new gt({props:{x:t.x,y:t.row,height:t.v*(Math.abs(t.LL/2-t.i)+1),opacity:2.5*Math.sqrt(t.v),z:10+2*Math.random(),castingShadow:!1,downwardShadow:!0}});return{c(){re(a.$$.fragment)},m(e,t){fe(a,e,t),n=!0},p:e,i(e){n||(ne(a.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),n=!1},d(e){le(a,e)}}}function wt(e){let t,n,a=e.arr,o=[];for(let t=0;t<a.length;t+=1)o[t]=xt(mt(e,a,t));const c=e=>ae(o[e],1,1,()=>{o[e]=null});return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=X()},m(e,a){for(let t=0;t<o.length;t+=1)o[t].m(e,a);w(e,t,a),n=!0},p(e,n){if(e.cols||e.Math||e.LL){let i;for(a=n.arr,i=0;i<a.length;i+=1){const c=mt(n,a,i);o[i]?(o[i].p(e,c),ne(o[i],1)):(o[i]=xt(c),o[i].c(),ne(o[i],1),o[i].m(t.parentNode,t))}for(ee(),i=a.length;i<o.length;i+=1)c(i);te()}},i(e){if(!n){for(let e=0;e<a.length;e+=1)ne(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ae(o[e]);n=!1},d(e){S(o,e),e&&L(t)}}}function Lt(e){let t,n,a,o,c=e.cols,i=[];for(let t=0;t<c.length;t+=1)i[t]=wt(bt(e,c,t));const r=e=>ae(i[e],1,1,()=>{i[e]=null});return{c(){t=_(),n=_(),a=v("g");for(let e=0;e<i.length;e+=1)i[e].c()},m(e,c){w(e,t,c),w(e,n,c),w(e,a,c);for(let e=0;e<i.length;e+=1)i[e].m(a,null);o=!0},p(e,t){if(e.cols||e.Math||e.LL){let n;for(c=t.cols,n=0;n<c.length;n+=1){const o=bt(t,c,n);i[n]?(i[n].p(e,o),ne(i[n],1)):(i[n]=wt(o),i[n].c(),ne(i[n],1),i[n].m(a,null))}for(ee(),n=c.length;n<i.length;n+=1)r(n);te()}},i(e){if(!o){for(let e=0;e<c.length;e+=1)ne(i[e]);o=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ae(i[e]);o=!1},d(e){e&&L(t),e&&L(n),e&&L(a),S(i,e)}}}function St(e){let t,n;const a=new Ne({props:{width:vt,tileSize:e.tileSize,grid:Dt,$$slots:{default:[Lt],earth:[yt],defs:[$t]},$$scope:{ctx:e}}});return{c(){t=D("div"),re(a.$$.fragment)},m(e,o){w(e,t,o),fe(a,t,null),n=!0},p(e,t){const n={};e.$$scope&&(n.$$scope={changed:e,ctx:t}),a.$set(n)},i(e){n||(ne(a.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),n=!1},d(e){e&&L(t),le(a)}}}const Dt=!1,vt=1400,zt=100;function _t(e=zt,t=.5,n=1e3){const a=ft(e,t),o=Array.from({length:n}).fill(null).map(()=>Math.floor(a())).reduce((e,t)=>(t in e||(e[t]=0),e[t]+=1,e),{}),c=Object.entries(o),i=c.reduce((e,[t,n])=>e+n,0);return c.map(([e,t])=>[+e,t/i])}function Xt(e){return{tileSize:vt/zt/2,LL:zt,cols:((e=32)=>Array.from({length:e}).fill(null).map((t,n)=>({row:e-n,values:_t(100,.5,500)})))(zt)}}class Yt extends pe{constructor(e){super(),de(this,e,Xt,St,r,{})}}function Mt(e,t,n){const a=Object.create(e);return a.x=t[n][0],a.y=t[n][1],a.rx=t[n][2],a.ry=t[n][3],a.w=t[n][4],a.h=t[n][5],a.height=t[n][6],a.a=t[n][7],a.i=n,a}function At(e){let t,n;const a=new Fe({});return{c(){t=v("defs"),re(a.$$.fragment),M(t,"slot","defs")},m(e,o){w(e,t,o),fe(a,t,null),n=!0},i(e){n||(ne(a.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),n=!1},d(e){e&&L(t),le(a)}}}function Tt(e){let t,n;const a=new Qe({});return{c(){t=v("g"),re(a.$$.fragment),M(t,"slot","earth")},m(e,o){w(e,t,o),fe(a,t,null),n=!0},i(e){n||(ne(a.$$.fragment,e),n=!0)},o(e){ae(a.$$.fragment,e),n=!1},d(e){e&&L(t),le(a)}}}function jt(e){let t;const n=new gt({props:{x:e.x+e.rx,y:e.y+e.ry,xLength:e.w,yLength:e.h,height:e.$spr*e.height+e.overallHeight,angle:e.angle*e.a}});return{c(){re(n.$$.fragment)},m(e,a){fe(n,e,a),t=!0},p(e,t){const a={};e.$homesStore&&(a.x=t.x+t.rx),e.$homesStore&&(a.y=t.y+t.ry),e.$homesStore&&(a.xLength=t.w),e.$homesStore&&(a.yLength=t.h),(e.$spr||e.$homesStore||e.overallHeight)&&(a.height=t.$spr*t.height+t.overallHeight),(e.angle||e.$homesStore)&&(a.angle=t.angle*t.a),n.$set(a)},i(e){t||(ne(n.$$.fragment,e),t=!0)},o(e){ae(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function Et(e){let t,n,a,o,c=e.$homesStore,i=[];for(let t=0;t<c.length;t+=1)i[t]=jt(Mt(e,c,t));const r=e=>ae(i[e],1,1,()=>{i[e]=null});return{c(){t=_(),n=_();for(let e=0;e<i.length;e+=1)i[e].c();a=X()},m(e,c){w(e,t,c),w(e,n,c);for(let t=0;t<i.length;t+=1)i[t].m(e,c);w(e,a,c),o=!0},p(e,t){if(e.$homesStore||e.$spr||e.overallHeight||e.angle){let n;for(c=t.$homesStore,n=0;n<c.length;n+=1){const o=Mt(t,c,n);i[n]?(i[n].p(e,o),ne(i[n],1)):(i[n]=jt(o),i[n].c(),ne(i[n],1),i[n].m(a.parentNode,a))}for(ee(),n=c.length;n<i.length;n+=1)r(n);te()}},i(e){if(!o){for(let e=0;e<c.length;e+=1)ne(i[e]);o=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ae(i[e]);o=!1},d(e){e&&L(t),e&&L(n),S(i,e),e&&L(a)}}}function kt(e){let t,n,a,o,i,r,f,l,s,d,p,h,g,u,m,b,$,y,S,v;const X=new Ne({props:{width:Ot,tileSize:e.tileSize,grid:!1,$$slots:{default:[Et,({placeX:e,placeY:t})=>({placeX:e,placeY:t})],earth:[Tt,({placeX:e,placeY:t})=>({placeX:e,placeY:t})],defs:[At,({placeX:e,placeY:t})=>({placeX:e,placeY:t})]},$$scope:{ctx:e}}});return{c(){t=D("div"),re(X.$$.fragment),n=_(),a=D("div"),o=D("label"),i=z("rotation\n    "),r=D("input"),d=_(),p=D("label"),h=z("general height\n    "),g=D("input"),$=_(),(y=D("button")).textContent="randomize",M(r,"type","range"),M(r,"min",f=0),M(r,"max",l=Math.PI/4),M(r,"step",s=.005),M(g,"type","range"),M(g,"min",u=0),M(g,"max",m=3),M(g,"step",b=.01),M(a,"class","scene-controls"),v=[Y(r,"change",e.input0_change_input_handler),Y(r,"input",e.input0_change_input_handler),Y(g,"change",e.input1_change_input_handler),Y(g,"input",e.input1_change_input_handler),Y(y,"click",e.click_handler)]},m(c,f){w(c,t,f),fe(X,t,null),w(c,n,f),w(c,a,f),x(a,o),x(o,i),x(o,r),T(r,e.angle),x(a,d),x(a,p),x(p,h),x(p,g),T(g,e.overallHeight),x(a,$),x(a,y),S=!0},p(e,t){const n={};(e.$$scope||e.$homesStore||e.$spr||e.overallHeight||e.angle)&&(n.$$scope={changed:e,ctx:t}),X.$set(n),e.angle&&T(r,t.angle),e.overallHeight&&T(g,t.overallHeight)},i(e){S||(ne(X.$$.fragment,e),S=!0)},o(e){ae(X.$$.fragment,e),S=!1},d(e){e&&L(t),le(X),e&&L(n),e&&L(a),c(v)}}}const Ot=1400,Ht=25,Nt=300,Ct=.1,Pt=.3;function Bt(e,t,n){let a,o;const c=Ot/Ht/2,i=we(0,{duration:Nt,easing:ue});f(e,i,e=>n("$spr",o=e));const r=(e,t,n,a=Pt)=>{const o=.1+Math.random()/4,c=2*o;return[e,t,o,o,1-c,1-c,a+Math.random(),a+Math.random()]},l=((e=Ct)=>Array.from({length:Ht*Ht}).fill(null).map((t,n)=>{if(Math.random()>e)return;const a=n%Ht,o=Math.floor(n/Ht);return r(a,o)}).filter(e=>void 0!==e))();l.sort(([e,t],[n,a])=>{const o=Math.floor(e),c=Math.floor(t),i=Math.floor(n),r=Math.floor(a);return o<=i&&c>=r?-1:1});const s=ye(l);f(e,s,e=>n("$homesStore",a=e));let d=0,p=0;return i.set(1),s.update(e=>e.map(([e,t],n)=>r(e,t))),{tileSize:c,spr:i,randomizeArrayElement:r,homesStore:s,angle:d,overallHeight:p,$homesStore:a,$spr:o,input0_change_input_handler:function(){d=A(this.value),n("angle",d)},input1_change_input_handler:function(){p=A(this.value),n("overallHeight",p)},click_handler:()=>{s.update(e=>e.map(([e,t],n)=>r(e,t)))}}}class Gt extends pe{constructor(e){super(),de(this,e,Bt,kt,r,{})}}function It(e,t,n){const a=Object.create(e);return a.name=t[n].name,a.component=t[n].component,a.i=n,a}function Rt(e,t,n){const a=Object.create(e);return a.name=t[n].name,a.component=t[n].component,a.i=n,a}function qt(e){let t,n;var a=e.scenes[e.which].component;if(a)var o=new a({});return{c(){o&&re(o.$$.fragment),t=X()},m(e,a){o&&fe(o,e,a),w(e,t,a),n=!0},p(e,n){if(a!==(a=n.scenes[n.which].component)){if(o){ee();const e=o;ae(e.$$.fragment,1,0,()=>{le(e,1)}),te()}a?(re((o=new a({})).$$.fragment),ne(o.$$.fragment,1),fe(o,t.parentNode,t)):o=null}},i(e){n||(o&&ne(o.$$.fragment,e),n=!0)},o(e){o&&ae(o.$$.fragment,e),n=!1},d(e){e&&L(t),o&&le(o,e)}}}function Ft(e){let t,n,a=e.i===e.which&&qt(e);return{c(){a&&a.c(),t=X()},m(e,o){a&&a.m(e,o),w(e,t,o),n=!0},p(e,n){n.i===n.which?a?(a.p(e,n),ne(a,1)):((a=qt(n)).c(),ne(a,1),a.m(t.parentNode,t)):a&&(ee(),ae(a,1,1,()=>{a=null}),te())},i(e){n||(ne(a),n=!0)},o(e){ae(a),n=!1},d(e){a&&a.d(e),e&&L(t)}}}function Jt(e){let t,n,a,o,c,i,r,f=e.name+"";return{c(){t=D("label"),n=D("input"),o=_(),c=z(f),i=_(),M(n,"type","radio"),n.__value=a=e.i,n.value=n.__value,e.$$binding_groups[0].push(n),r=Y(n,"change",e.input_change_handler)},m(a,r){w(a,t,r),x(t,n),n.checked=n.__value===e.which,x(t,o),x(t,c),x(t,i)},p(e,t){e.which&&(n.checked=n.__value===t.which)},d(a){a&&L(t),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(n),1),r()}}}function Kt(e){let t,n,a,o,c,i=e.scenes,r=[];for(let t=0;t<i.length;t+=1)r[t]=Ft(Rt(e,i,t));const f=e=>ae(r[e],1,1,()=>{r[e]=null});let l=e.scenes,s=[];for(let t=0;t<l.length;t+=1)s[t]=Jt(It(e,l,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=_(),n=D("div"),(a=D("h1")).textContent="isometric map",o=_();for(let e=0;e<s.length;e+=1)s[e].c();M(a,"class","svelte-1nhw0jj"),M(n,"class","scene-selection")},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);w(e,t,i),w(e,n,i),x(n,a),x(n,o);for(let e=0;e<s.length;e+=1)s[e].m(n,null);c=!0},p(e,a){if(e.which||e.scenes){let n;for(i=a.scenes,n=0;n<i.length;n+=1){const o=Rt(a,i,n);r[n]?(r[n].p(e,o),ne(r[n],1)):(r[n]=Ft(o),r[n].c(),ne(r[n],1),r[n].m(t.parentNode,t))}for(ee(),n=i.length;n<r.length;n+=1)f(n);te()}if(e.scenes||e.which){let t;for(l=a.scenes,t=0;t<l.length;t+=1){const o=It(a,l,t);s[t]?s[t].p(e,o):(s[t]=Jt(o),s[t].c(),s[t].m(n,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=l.length}},i(e){if(!c){for(let e=0;e<i.length;e+=1)ne(r[e]);c=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ae(r[e]);c=!1},d(e){S(r,e),e&&L(t),e&&L(n),S(s,e)}}}function Qt(e,t,n){let a=0;return{which:a,scenes:[{name:"Hamlet",component:Gt},{name:"Heights",component:Yt},{name:"Bouncing",component:rt}],input_change_handler:function(){a=this.__value,n("which",a)},$$binding_groups:[[]]}}return new class extends pe{constructor(e){super(),de(this,e,Qt,Kt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
